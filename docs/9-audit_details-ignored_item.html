<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucy's Review - Audit Details - Equalify</title>
</head>
<body>
    <header>
        <nav aria-label="Main">
            <ul>
                <li><a href="#">Audits</a></li>
                <li><a href="13-logs-with_content.html">Logs</a></li>
                <li><a href="#">Account</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Lucy's Review</h1>
        <div aria-live="assertive">One blocker ignored in Lucy's Audit.</div>
        <article>
            <h2>Overview</h2>
            <p>2 URLs in audit. Runs monthly. <a href="#">View Audit Logs</a></p>
        </article>
        <article>
            <h2>Admin Actions</h2>
            <nav aria-label="Audit Actions">
                <button>Run Audit</button>
                <a href="#">Edit Audit</a>    
            </nav>
        </article>
        <article>
            <h2>Progress</h2>
            <table>
                <thead>
                    <tr>
                        <th>Audit Snapshot</th>
                        <th>Fixed Blockers</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>11-1-24</td>
                        <td>0%</td>
                    </tr>
                </tbody>
            </table>
        </article>
        <article>
            <h2>Blockers</h2>
            <input type="checkbox" name="toggle" id="toggle_view_options"  />
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const viewOptions = document.getElementById("view_options");
                    const toggleViewOptions = document.getElementById("toggle_view_options");

                    // Hide view options by default
                    viewOptions.style.display = "none";
                    viewOptions.setAttribute("aria-hidden", "true");

                    // Toggle visibility on checkbox change
                    toggleViewOptions.addEventListener("change", function () {
                        if (toggleViewOptions.checked) {
                            viewOptions.style.display = "block";
                            viewOptions.setAttribute("aria-hidden", "false");
                        } else {
                            viewOptions.style.display = "none";
                            viewOptions.setAttribute("aria-hidden", "true");
                        }
                    });
                });
            </script>
            <label for="toggle_view_options">
                Show View Options
            </label>
            <section id="view_options">
                <h3>View Options</h3>
                <form>
                    <div role="group" aria-labelledby="search-group">
                        <h4 id="search-group">Search</h4>
                        <label for="search_source">Search In:</label>
                        <select id="search_source">
                            <option>Blocker Code</option>
                            <option>Page Title</option>
                            <option>URL</option>
                            <option>Tag</option>
                            <option>Issue</option>
                        </select>
                        <label for="search">Keywords:</label>
                        <input type="text" id="search">
                    </div>
                    
                    <div role="group" aria-labelledby="filter-blockers-by-url">
                        <h4 id="filter-blockers-by-url">Filter Blockers By URL</h4>
                        <table id="added_pages">
                            <thead>
                                <tr>
                                    <th role="columnheader">URL</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th role="rowheader"><input type="checkbox" id="checkbox-1"><label for="checkbox-1"> https://update.lib.berkeley.edu/</label></th>
                                </tr>
                                <tr>
                                    <th role="rowheader"><input type="checkbox" id="checkbox-2"><label for="checkbox-2">  https://www-stg.berkeley.edu</label></th>
                                </tr>
                            </tbody>
                        </table>
                        <nav aria-label="Added Pages Table">
                            <label for="item-count">Showing 2 of 2 Pages. Change Number of Pages Displayed:</label> 
                            <select id="item-count">
                                <option selected>Up to 5</option>
                            </select>
                        </nav>
                        <script>
                            document.querySelectorAll('.select_all').forEach(selectAllCheckbox => {
                                selectAllCheckbox.addEventListener('change', function() {
                                    const parent = this.closest('div, table, details, section');
                                    const checkboxes = parent.querySelectorAll('input[type="checkbox"]:not(.select_all)');
                                    checkboxes.forEach(checkbox => checkbox.checked = this.checked);
                                });
                            });
                        </script>
                    </div>

                    <div role="group" aria-labelledby="include-type">
                        <h4 id="include-tyoe">Content Type</h4>
                        <select id="importer" aria-labelledby="include-type"> 
                            <option selected>HTML</option>
                            <option>PDF</option>
                        </select>
                    </div>
                    
                    <div role="group" aria-labelledby="include-tags">
                        <h4 id="include-tags">Include Issues with Tag</h4>

                        <input id="tag-select-all" type="checkbox" checked>
                        <label for="tag-select-all">Select All</label>
                    
                        <input id="tag-wcag-a" name="tag" type="checkbox" checked>
                        <label for="tag-wcag-a">WCAG 2.2 A</label>
                    
                        <input id="tag-wcag-aa" name="tag" type="checkbox" checked>
                        <label for="tag-wcag-aa">WCAG 2.2 AA</label>
                    
                        <input id="tag-wcag-aaa" name="tag" type="checkbox" checked>
                        <label for="tag-wcag-aaa">WCAG 2.2 AAA</label>
                    
                        <input id="tag-heading-elements" name="tag" type="checkbox" checked>
                        <label for="tag-heading-elements">Heading Elements</label>

                        <script>
                            document.addEventListener("DOMContentLoaded", function () {
                                const selectAllCheckbox = document.getElementById("tag-select-all");
                                const tagCheckboxes = document.querySelectorAll('div[aria-labelledby="include-tags"] input[type="checkbox"]:not(#tag-select-all)');
                        
                                selectAllCheckbox.addEventListener("change", function () {
                                    tagCheckboxes.forEach(checkbox => checkbox.checked = selectAllCheckbox.checked);
                                });
                        
                                // Update "Select All" state when any checkbox is manually changed
                                tagCheckboxes.forEach(checkbox => {
                                    checkbox.addEventListener("change", function () {
                                        selectAllCheckbox.checked = [...tagCheckboxes].every(cb => cb.checked);
                                    });
                                });
                            });
                        </script>
                    </div>
                    
                    <div role="group" aria-labelledby="include-status">
                        <h4 id="include-status">Include Blockers with Status</h4>
                        <input id="status-active" type="checkbox" checked>
                        <label for="status-active">Active</label>
                    
                        <input id="status-ignored" type="checkbox">
                        <label for="status-ignored">Ignored</label>
                    
                        <input id="status-equalified" type="checkbox" checked>
                        <label for="status-equalified">Equalified</label>
                    </div>
                    
                    <div role="group" aria-labelledby="sort-group">
                        <h4 id="sort-group">Sort</h4>
                        <input id="sort-az" name="sort" type="radio" checked>
                        <label for="sort-az">Alphabetically (A to Z)</label>
                    
                        <input id="sort-za" name="sort" type="radio">
                        <label for="sort-za">Alphabetically (Z to A)</label>
                    
                        <input id="sort-active-most" name="sort" type="radio">
                        <label for="sort-active-most">Active Blockers (Most to Least)</label>
                    
                        <input id="sort-active-least" name="sort" type="radio">
                        <label for="sort-active-least">Active Blockers (Least to Most)</label>                    
                    </div>
                    <button>Save View Options</button>
                </form>
            </section>
            <section>
                <h3>All Blockers - Hiding Ignored Blockers</h3>
                <div class="accordion">
                    <h4>
                        <button id="issue-empty-alt-text" type="button" aria-expanded="false" class="accordion-trigger">
                            Empty Alt Text (2 Active Blockers) - Tags: WCAG 2.2 AA, Images
                        </button>
                    </h4>
                    <div role="region" aria-labelledby="issue-empty-alt-text" style="display: none;">
                        <a href="#">More info on "Empty Alt Text" Issue</a>
                        <input id="all-repeat-link-text" type="checkbox" class="select_all"> <label for="all-repeat-link-text">Select All Blockers with "Empty Alt Text" Issue</label>
                        <table summary="Includes all blockers related to the Empty Alt Text issue. Blocker code is in the first column, page title and url of the page with the blocker are in the third and fourth column, blocker status is in the fifth column, the check that caught the blocker is in the sixth column, and the audit date is in the seventh collumn. Each row represents a new blocker.">
                            <thead>
                                <tr>
                                    <th>Blocker Code</th>
                                    <th>Page Title</th>
                                    <th>URL</th>
                                    <th>Status</th>
                                    <th>Audit Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th role="rowheader"><input id="blocker-3" type="checkbox"> <label for="blocker-3"><code>&lt;img class="weird_heading"&gt;</code></label></th>
                                    <td>Berkeley Library (Staging)</td>
                                    <td><code>https://update.lib.berkeley.edu/</code></td>
                                    <td>Active</td>
                                    <td>12-1-2024</td>
                                </tr>
                                <tr>
                                    <th role="rowheader"><input id="blocker-2" type="checkbox"> <label for="blocker-2"><code>&lt;img alt="" &gt;</code></th>
                                    <td>Berkeley Homepage (Staging)</td>
                                    <td><code>https://www-stg.berkeley.edu</code></td>
                                    <td>Active</td>
                                    <td>12-1-2024</td>
                                </tr>
                            </tbody>
                        </table>
                        <nav aria-label="Empty Alt Text Table of Blockers">
                            <label for="item-count">Showing 2 of 2 Blockers. Change Number of Blockers Displayed:</label> 
                            <select id="item-count">
                                <option selected>Up to 5</option>
                            </select>
                        </nav>
                    </div>
                    <h4>
                        <button id="issue-repeat-link-text" type="button" aria-expanded="false" class="accordion-trigger">
                            Repeat Link Text (1 Active Blocker) - Tags: Links, Benefits Screen Readers
                        </button>
                    </h4>
                    <div role="region" aria-labelledby="issue-repeat-link-text" style="display: none;">
                        <a href="#">More info on "Empty Alt Text" Issue</a>
                        <input id="all-empty-alt-text" type="checkbox" class="select_all"> <label for="all-empty-alt-text">Select All Blockers with "Empty Alt Text" Issue</label>
                        <table summary="Includes all blockers related to the Repeat Link Text issue. Blocker code is in the first column,  in the second, page title and url of the page with the blocker are in the third and fourth column, blocker status is in the fifth column, the check that caught the blocker is in the sixth column, and the audit date is in the seventh collumn. Each row represents a new blocker.">
                            <thead>
                                <tr>
                                    <th>Blocker Code</th>
                                    <th>Page Title</th>
                                    <th>URL</th>
                                    <th>Status</th>
                                    <th>Audit Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th role="rowheader"><input id="blocker-1" type="checkbox"><label for="blocker-1"><code>&lt;a class=&quot;hello this is a test&quot;&gt;Hello World&lt;/a&gt;&lt;a href=&quot;#&quot;&gt;Hello World&lt;/a&gt;</code></label></th>
                                    <td>Berkeley Homepage (Staging)</td>
                                    <td><code>https://www-stg.berkeley.edu</code></td>
                                    <td>Active</td>
                                    <td>12-1-2024</td>
                                </tr>
                            </tbody>
                        </table>
                        <nav aria-label="Repeat Link Text Table of Blockers">
                            <label for="item-count">Showing 1 of 1 Blockers. Change Number of Blockers Displayed:</label> 
                            <select id="item-count">
                                <option selected>Up to 5</option>
                            </select>
                        </nav> 
                    </div>
    
                </div>
                <script>
                // Accordion
                document.addEventListener("DOMContentLoaded", function () {
                    document.querySelectorAll(".accordion-trigger").forEach((button) => {
                        button.addEventListener("click", function () {
                            const panel = this.parentElement.nextElementSibling;
                            const isExpanded = this.getAttribute("aria-expanded") === "true";

                            // Toggle aria-expanded
                            this.setAttribute("aria-expanded", !isExpanded);

                            // Toggle visibility
                            if (!isExpanded) {
                                panel.style.display = "block";
                            } else {
                                panel.style.display = "none";
                            }
                        });
                    });
                });

                // Select All
                document.querySelectorAll('.select_all').forEach(selectAllCheckbox => {
                    selectAllCheckbox.addEventListener('change', function() {
                        const parent = this.closest('div, table, details');
                        const checkboxes = parent.querySelectorAll('input[type="checkbox"]:not(.select_all)');
                        checkboxes.forEach(checkbox => checkbox.checked = this.checked);
                    });
                });
                </script>
                <nav aria-label="Issues">
                    <label for="item-count">Showing 2 of 2 Issue Groups. Change Number of Issue Groups Displayed:</label> 
                    <select id="item-count">
                        <option selected>Up to 5</option>
                    </select>
                </nav>
            </section>
            <section>
                <h3>Manage Selected Blockers</h3>
                <nav aria-label="Manage Selected Blockers">
                    <button onclick="window.location.href='9-audit_details-ignored_item.html';">Ignore Blockers</button>
                </nav>
            </section>
        </article>
    </main>

</body>
</html>
