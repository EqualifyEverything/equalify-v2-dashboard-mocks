<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucy's Review - Audit Details - Equalify</title>
</head>
<body>
    <header>
        <nav aria-label="Main">
            <ul>
                <li><a href="#">Audits</a></li>
                <li><a href="#">Pages</a></li>
                <li><a href="#">Logs</a></li>
                <li><a href="#">Account</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Lucy's Review</h1>
        <div aria-live="assertive">Audit ran. Three blockers found.</div>
        <article>
            <h2>Overview</h2>
            <p>2 checks on 2 pages. Runs monthly. Currently, idle.</p>
        </article>
        <article>
            <h2>Actions</h2>
            <nav aria-label="Audit Actions">
                <button>Run Audit</button>
                <a href="#">Edit Audit</a>    
            </nav>
        </article>
        <article>
            <h2>Progress</h2>
            <table>
                <thead>
                    <tr>
                        <th>Audit Snapshot</th>
                        <th>Fixed Blockers</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>11-1-24</td>
                        <td>0%</td>
                    </tr>
                </tbody>
            </table>
        </article>
        <article>
            <h2>Blockers</h2>
            <input type="checkbox" name="toggle" id="toggle_view_options"  />
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    const viewOptions = document.getElementById("view_options");
                    const toggleViewOptions = document.getElementById("toggle_view_options");

                    // Hide view options by default
                    viewOptions.style.display = "none";
                    viewOptions.setAttribute("aria-hidden", "true");

                    // Toggle visibility on checkbox change
                    toggleViewOptions.addEventListener("change", function () {
                        if (toggleViewOptions.checked) {
                            viewOptions.style.display = "block";
                            viewOptions.setAttribute("aria-hidden", "false");
                        } else {
                            viewOptions.style.display = "none";
                            viewOptions.setAttribute("aria-hidden", "true");
                        }
                    });
                });
            </script>
            <label for="toggle_view_options">
                Show View Options
            </label>
            <section id="view_options">
                <h3>View Options</h3>
                <form>
                    <div role="group" aria-labelledby="search-group">
                        <h4 id="search-group">Search</h4>
                        <label for="search_source">Search In:</label>
                        <select id="search_source">
                            <option>Blocker Code</option>
                            <option>Page Title</option>
                            <option>URL</option>
                            <option>Tag</option>
                            <option>Issue</option>
                        </select>
                        <label for="search">Keywords:</label>
                        <input type="text" id="search">
                    </div>
                    
                    <div role="group" aria-labelledby="group-blockers">
                        <h4 id="group-blockers">Group Blockers By</h4>
                        <input id="group-issue" name="group" type="radio" checked>
                        <label for="group-issue">Issue</label>
                    
                        <input id="group-page" name="group" type="radio">
                        <label for="group-page">Page</label>
                    
                        <input id="group-check" name="group" type="radio">
                        <label for="group-check">Check</label>
                    
                        <input id="group-none" name="group" type="radio">
                        <label for="group-none">None</label>
                    </div>
                    
                    <div role="group" aria-labelledby="include-tags">
                        <h4 id="include-tags">Include Issues with Tag</h4>

                        <input id="tag-select-all" type="checkbox" checked>
                        <label for="tag-select-all">Select All</label>
                    
                        <input id="tag-wcag-a" name="tag" type="checkbox" checked>
                        <label for="tag-wcag-a">WCAG 2.2 A</label>
                    
                        <input id="tag-wcag-aa" name="tag" type="checkbox" checked>
                        <label for="tag-wcag-aa">WCAG 2.2 AA</label>
                    
                        <input id="tag-wcag-aaa" name="tag" type="checkbox" checked>
                        <label for="tag-wcag-aaa">WCAG 2.2 AAA</label>
                    
                        <input id="tag-heading-elements" name="tag" type="checkbox" checked>
                        <label for="tag-heading-elements">Heading Elements</label>

                        <script>
                            document.addEventListener("DOMContentLoaded", function () {
                                const selectAllCheckbox = document.getElementById("tag-select-all");
                                const tagCheckboxes = document.querySelectorAll('div[aria-labelledby="include-tags"] input[type="checkbox"]:not(#tag-select-all)');
                        
                                selectAllCheckbox.addEventListener("change", function () {
                                    tagCheckboxes.forEach(checkbox => checkbox.checked = selectAllCheckbox.checked);
                                });
                        
                                // Update "Select All" state when any checkbox is manually changed
                                tagCheckboxes.forEach(checkbox => {
                                    checkbox.addEventListener("change", function () {
                                        selectAllCheckbox.checked = [...tagCheckboxes].every(cb => cb.checked);
                                    });
                                });
                            });
                        </script>
                    </div>
                    
                    <div role="group" aria-labelledby="include-status">
                        <h4 id="include-status">Include Blockers with Status</h4>
                        <input id="status-active" type="checkbox" checked>
                        <label for="status-active">Active</label>
                    
                        <input id="status-ignored" type="checkbox">
                        <label for="status-ignored">Ignored</label>
                    
                        <input id="status-equalified" type="checkbox" checked>
                        <label for="status-equalified">Equalified</label>
                    </div>
                    
                    <div role="group" aria-labelledby="sort-group">
                        <h4 id="sort-group">Sort</h4>
                        <input id="sort-az" name="sort" type="radio" checked>
                        <label for="sort-az">Alphabetically (A to Z)</label>
                    
                        <input id="sort-za" name="sort" type="radio">
                        <label for="sort-za">Alphabetically (Z to A)</label>
                    
                        <input id="sort-active-most" name="sort" type="radio">
                        <label for="sort-active-most">Active Blockers (Most to Least)</label>
                    
                        <input id="sort-active-least" name="sort" type="radio">
                        <label for="sort-active-least">Active Blockers (Least to Most)</label>
                    
                        <input id="sort-latest" name="sort" type="radio">
                        <label for="sort-latest">Audited (Latest to Oldest)</label>
                    
                        <input id="sort-oldest" name="sort" type="radio">
                        <label for="sort-oldest">Audited (Oldest to Latest)</label>
                    </div>
                    <button>Save View Options</button>
                </form>
            </section>
            <section>
                <h3>All Blockers - Grouped by Issue - Hiding Ignored Blockers</h3>
                <div class="accordion">
                    <h4>
                        <button id="issue-empty-alt-text" type="button" aria-expanded="false" class="accordion-trigger">
                            Empty Alt Text (2 Active Blockers) - Tags: WCAG 2.2 AA, Images
                        </button>
                    </h4>
                    <div role="region" aria-labelledby="issue-empty-alt-text" style="display: none;">
                        <a href="#">More info on "Empty Alt Text" Issue</a>
                        <input id="all-repeat-link-text" type="checkbox" class="select_all"> <label for="all-repeat-link-text">Select All Blockers with "Empty Alt Text" Issue</label>
                        <table summary="Includes all blockers related to the Empty Alt Text issue. Blocker code is in the first column, screenshot in the second, page title and url of the page with the blocker are in the third and fourth column, blocker status is in the fifth column, the check that caught the blocker is in the sixth column, and the audit date is in the seventh collumn. Each row represents a new blocker.">
                            <thead>
                                <tr>
                                    <th>Blocker Code</th>
                                    <th>Screenshot</th>
                                    <th>Page Title</th>
                                    <th>URL</th>
                                    <th>Status</th>
                                    <th>Check</th>
                                    <th>Audit Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th role="rowheader"><input id="blocker-3" type="checkbox"> <label for="blocker-3"><code>&lt;img class="weird_heading"&gt;</code></label></th>
                                    <td><img src="image.jpg" alt="Screenshot of Blocker 3"></td>
                                    <td>Berkeley Library (Staging)</td>
                                    <td><code>https://update.lib.berkeley.edu/</code></td>
                                    <td>Active</td>
                                    <td>empty-alt-text</td>
                                    <td>12-1-2024</td>
                                </tr>
                                <tr>
                                    <th role="rowheader"><input id="blocker-2" type="checkbox"> <label for="blocker-2"><code>&lt;img alt="" &gt;</code></th>
                                    <td><img src="image.jpg" alt="Screenshot of Blocker 1"></td>
                                    <td>Berkeley Homepage (Staging)</td>
                                    <td><code>https://www-stg.berkeley.edu</code></td>
                                    <td>Active</td>
                                    <td>empty-alt-text</td>
                                    <td>12-1-2024</td>
                                </tr>
                            </tbody>
                        </table>
                        <nav aria-label="Empty Alt Text Table of Blockers">
                            <label for="item-count">Showing 2 of 2 Blockers. Change Number of Blockers Displayed:</label> 
                            <select id="item-count">
                                <option selected>Up to 5</option>
                            </select>
                        </nav>
                    </div>
                    <h4>
                        <button id="issue-repeat-link-text" type="button" aria-expanded="false" class="accordion-trigger">
                            Repeat Link Text (1 Active Blocker) - Tags: Links, Benefits Screen Readers
                        </button>
                    </h4>
                    <div role="region" aria-labelledby="issue-repeat-link-text" style="display: none;">
                        <a href="#">More info on "Empty Alt Text" Issue</a>
                        <input id="all-empty-alt-text" type="checkbox" class="select_all"> <label for="all-empty-alt-text">Select All Blockers with "Empty Alt Text" Issue</label>
                        <table summary="Includes all blockers related to the Repeat Link Text issue. Blocker code is in the first column, screenshot in the second, page title and url of the page with the blocker are in the third and fourth column, blocker status is in the fifth column, the check that caught the blocker is in the sixth column, and the audit date is in the seventh collumn. Each row represents a new blocker.">
                            <thead>
                                <tr>
                                    <th>Blocker Code</th>
                                    <th>Screenshot</th>
                                    <th>Page Title</th>
                                    <th>URL</th>
                                    <th>Status</th>
                                    <th>Check</th>
                                    <th>Audit Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th role="rowheader"><input id="blocker-1" type="checkbox"><label for="blocker-1"><code>&lt;a class=&quot;hello this is a test&quot;&gt;Hello World&lt;/a&gt;&lt;a href=&quot;#&quot;&gt;Hello World&lt;/a&gt;</code></label></th>
                                    <td><img src="image.jpg" alt="Screenshot of Blocker 2"></td>
                                    <td>Berkeley Homepage (Staging)</td>
                                    <td><code>https://www-stg.berkeley.edu</code></td>
                                    <td>Active</td>
                                    <td>empty-headings</td>
                                    <td>12-1-2024</td>
                                </tr>
                            </tbody>
                        </table>
                        <nav aria-label="Repeat Link Text Table of Blockers">
                            <label for="item-count">Showing 1 of 1 Blockers. Change Number of Blockers Displayed:</label> 
                            <select id="item-count">
                                <option selected>Up to 5</option>
                            </select>
                        </nav> 
                    </div>
    
                </div>
                <script>
                // Accordion
                document.addEventListener("DOMContentLoaded", function () {
                    document.querySelectorAll(".accordion-trigger").forEach((button) => {
                        button.addEventListener("click", function () {
                            const panel = this.parentElement.nextElementSibling;
                            const isExpanded = this.getAttribute("aria-expanded") === "true";

                            // Toggle aria-expanded
                            this.setAttribute("aria-expanded", !isExpanded);

                            // Toggle visibility
                            if (!isExpanded) {
                                panel.style.display = "block";
                            } else {
                                panel.style.display = "none";
                            }
                        });
                    });
                });

                // Select All
                document.querySelectorAll('.select_all').forEach(selectAllCheckbox => {
                    selectAllCheckbox.addEventListener('change', function() {
                        const parent = this.closest('div, table, details');
                        const checkboxes = parent.querySelectorAll('input[type="checkbox"]:not(.select_all)');
                        checkboxes.forEach(checkbox => checkbox.checked = this.checked);
                    });
                });
                </script>
                <nav aria-label="Issues">
                    <label for="item-count">Showing 2 of 2 Issue Groups. Change Number of Issue Groups Displayed:</label> 
                    <select id="item-count">
                        <option selected>Up to 5</option>
                    </select>
                </nav>
            </section>
            <section>
                <h3>Manage Selected Blockers</h3>
                <nav aria-label="Manage Selected Blockers">
                    <button onclick="window.location.href='9-audit_details-ignored_item.html';">Ignore Blockers</button>
                    <button>Generate Ticket</button>    
                </nav>
            </section>
        </article>
        <article>
            <h2>Related Logs</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Summary</th>
                        <th>Trigger</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th role="rowheader"><a href="#">Log 3</a></th>
                        <td>Audit ran. Three blockers found.</td>
                        <td>Lucy's Review Audit</td>
                    </tr>
                    <tr>
                        <th role="rowheader"><a href="#">Log 2</a></th>
                        <td>Lucy's Review created with two pages and two checks.</td>
                        <td>User: Lucy</td>
                    </tr>
                </tbody>
            </table> 
            <nav aria-label="Logs Table">
                <label for="item-count">Showing 2 of 2 Logs. Change Number of Logs Displayed:</label> 
                <select id="item-count">
                    <option selected>Up to 5</option>
                </select>
            </nav>
        </article>
    </main>

    <footer>
        <section>
            <h2>Scan Quota</h2>
            <p>0 free scans remaining. <a href="#">Upgrade</a>.</p>
        </section>
        <section>
            <h2>Need help?</h2>
            <p>Email <a href="#">support@equalify.app</a>.</p>
        </section>
    </footer>
</body>
</html>
